import{w as z,r as J}from"./index.a0b4eb01.js";import{q as j}from"./scheduler.d3ff6565.js";const K=z(void 0);function te(e,t){const{computePosition:r,autoUpdate:c,offset:w,shift:v,flip:d,arrow:m,size:h,autoPlacement:a,hide:l,inline:E}=j(K),s={open:!1,autoUpdateCleanup:()=>{}},U=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let y;const f="https://www.skeleton.dev/utilities/popups";let o,b;function x(){o=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),b=o.querySelector(".arrow")??document.createElement("div")}x();function S(){var i,p,k,I,D,F,_,q;if(!o)throw new Error(`The data-popup="${t.target}" element was not found. ${f}`);if(!r)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${f}`);if(!w)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${f}`);if(!v)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${f}`);if(!d)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${f}`);if(!m)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${f}`);const n=[];h&&n.push(h((i=t.middleware)==null?void 0:i.size)),a&&n.push(a((p=t.middleware)==null?void 0:p.autoPlacement)),l&&n.push(l((k=t.middleware)==null?void 0:k.hide)),E&&n.push(E((I=t.middleware)==null?void 0:I.inline)),r(e,o,{placement:t.placement??"bottom",middleware:[w(((D=t.middleware)==null?void 0:D.offset)??8),v(((F=t.middleware)==null?void 0:F.shift)??{padding:8}),d((_=t.middleware)==null?void 0:_.flip),m(((q=t.middleware)==null?void 0:q.arrow)??{element:b||null}),...n]}).then(({x:H,y:R,placement:V,middlewareData:W})=>{if(Object.assign(o.style,{left:`${H}px`,top:`${R}px`}),b){const{x:O,y:Q}=W.arrow,B={top:"bottom",right:"left",bottom:"top",left:"right"}[V.split("-")[0]];Object.assign(b.style,{left:O!=null?`${O}px`:"",top:Q!=null?`${Q}px`:"",right:"",bottom:"",[B]:"-4px"})}})}function L(){o&&(s.open=!0,t.state&&t.state({state:s.open}),S(),o.style.display="block",o.style.opacity="1",o.style.pointerEvents="auto",o.removeAttribute("inert"),s.autoUpdateCleanup=c(e,o,S),y=Array.from(o==null?void 0:o.querySelectorAll(U)))}function u(n){if(!o)return;const i=parseFloat(window.getComputedStyle(o).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{s.open=!1,t.state&&t.state({state:s.open}),o.style.opacity="0",o.setAttribute("inert",""),s.autoUpdateCleanup&&s.autoUpdateCleanup(),n&&n()},i)}function $(){s.open===!1?L():u()}function M(n){if(s.open===!1||e.contains(n.target))return;if(o&&o.contains(n.target)===!1){u();return}const i=t.closeQuery===void 0?"a[href], button":t.closeQuery,p=o==null?void 0:o.querySelectorAll(i);p==null||p.forEach(k=>{k.contains(n.target)&&u()})}const A=n=>{if(s.open===!1)return;const i=n.key;if(i==="Escape"){n.preventDefault(),e.focus(),u();return}y=Array.from(o==null?void 0:o.querySelectorAll(U)),s.open&&document.activeElement===e&&(i==="ArrowDown"||i==="Tab")&&U.length>0&&y.length>0&&(n.preventDefault(),y[0].focus())};switch(t.event){case"click":e.addEventListener("click",$,!0),window.addEventListener("click",M,!0);break;case"hover":e.addEventListener("mouseover",L,!0),e.addEventListener("mouseleave",()=>u(),!0);break;case"focus-blur":e.addEventListener("focus",$,!0),e.addEventListener("blur",()=>u(),!0);break;case"focus-click":e.addEventListener("focus",L,!0),window.addEventListener("click",M,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${f}`)}return window.addEventListener("keydown",A,!0),S(),{update(n){u(()=>{t=n,S(),x()})},destroy(){e.removeEventListener("click",$,!0),e.removeEventListener("mouseover",L,!0),e.removeEventListener("mouseleave",()=>u(),!0),e.removeEventListener("focus",$,!0),e.removeEventListener("focus",L,!0),e.removeEventListener("blur",()=>u(),!0),window.removeEventListener("click",M,!0),window.removeEventListener("keydown",A,!0)}}}const C={};function T(e){return e==="local"?localStorage:sessionStorage}function P(e,t,r){const c=(r==null?void 0:r.serializer)??JSON,w=(r==null?void 0:r.storage)??"local";function v(d,m){T(w).setItem(d,c.stringify(m))}if(!C[e]){const d=z(t,a=>{const l=T(w).getItem(e);l&&a(c.parse(l));{const E=s=>{s.key===e&&a(s.newValue?c.parse(s.newValue):null)};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)}}),{subscribe:m,set:h}=d;C[e]={set(a){v(e,a),h(a)},update(a){const l=a(j(d));v(e,l),h(l)},subscribe:m}}return C[e]}const X=P("modeOsPrefers",!1),Y=P("modeUserPrefers",void 0),G=P("modeCurrent",!1);function oe(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return X.set(e),e}function ne(e){Y.set(e)}function re(e){const t=document.documentElement.classList,r="dark";e===!0?t.remove(r):t.add(r),G.set(e)}function se(){const e=document.documentElement.classList,t=localStorage.getItem("modeUserPrefers")==="false",r=!("modeUserPrefers"in localStorage),c=window.matchMedia("(prefers-color-scheme: dark)").matches;t||r&&c?e.add("dark"):e.remove("dark")}const g="(prefers-reduced-motion: reduce)";function Z(){return window.matchMedia(g).matches}J(Z(),e=>{{const t=c=>{e(c.matches)},r=window.matchMedia(g);return r.addEventListener("change",t),()=>{r.removeEventListener("change",t)}}});export{re as a,ne as b,K as c,oe as g,G as m,te as p,se as s};
